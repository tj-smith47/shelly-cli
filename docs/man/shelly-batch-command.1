.nh
.TH "SHELLY" "1" "Jan 2026" "Shelly CLI" "User Commands"

.SH NAME
shelly-batch-command - Send RPC command to devices


.SH SYNOPSIS
\fBshelly batch command  [params-json] [device...] [flags]\fP


.SH DESCRIPTION
Send a raw RPC command to multiple devices simultaneously.

.PP
The method is the RPC method name (e.g., "Switch.Set", "Shelly.GetStatus").
Params should be a JSON object (e.g., '{"id":0,"on":true}').

.PP
Target devices can be specified multiple ways:
  - As arguments: device names or addresses after the method/params
  - Via stdin: pipe device names (one per line or space-separated)
  - Via group: --group flag targets all devices in a group
  - Via all: --all flag targets all registered devices

.PP
Priority: explicit args > stdin > group > all

.PP
Results are output as JSON or YAML (use -o yaml). Each result includes
the device name and either the response or error message.


.SH OPTIONS
\fB-a\fP, \fB--all\fP[=false]
	Target all registered devices

.PP
\fB-c\fP, \fB--concurrent\fP=5
	Max concurrent operations

.PP
\fB-g\fP, \fB--group\fP=""
	Target device group

.PP
\fB-h\fP, \fB--help\fP[=false]
	help for command

.PP
\fB-o\fP, \fB--output\fP="json"
	Output format: json, yaml

.PP
\fB-t\fP, \fB--timeout\fP=10s
	Timeout per device


.SH OPTIONS INHERITED FROM PARENT COMMANDS
\fB--config\fP=""
	Config file (default $HOME/.config/shelly/config.yaml)

.PP
\fB--log-categories\fP=""
	Filter logs by category (comma-separated: network,api,device,config,auth,plugin)

.PP
\fB--log-json\fP[=false]
	Output logs in JSON format

.PP
\fB--no-color\fP[=false]
	Disable colored output

.PP
\fB--no-headers\fP[=false]
	Hide table headers in output

.PP
\fB--plain\fP[=false]
	Disable borders and colors (machine-readable output)

.PP
\fB-q\fP, \fB--quiet\fP[=false]
	Suppress non-essential output

.PP
\fB--refresh\fP[=false]
	Bypass cache and fetch fresh data from device

.PP
\fB--template\fP=""
	Go template string for output (use with -o template)

.PP
\fB-v\fP, \fB--verbose\fP[=0]
	Increase verbosity (-v=info, -vv=debug, -vvv=trace)


.SH EXAMPLE
.EX
  # Get status from all devices in a group
  shelly batch command "Shelly.GetStatus" --group living-room

  # Turn on switch 0 on specific devices
  shelly batch command "Switch.Set" '{"id":0,"on":true}' light-1 light-2

  # Set brightness on all devices
  shelly batch command "Light.Set" '{"id":0,"brightness":50}' --all

  # Using alias
  shelly batch rpc "Switch.Toggle" '{"id":0}' --group bedroom

  # Output as YAML
  shelly batch command "Shelly.GetDeviceInfo" --all -o yaml

  # Pipe device names from a file
  cat devices.txt | shelly batch command "Shelly.GetStatus"

  # Pipe from device list command
  shelly device list -o json | jq -r '.[].name' | shelly batch command "Shelly.Reboot"

  # Get status of Gen2+ devices and extract uptime
  shelly device list -o json | jq -r '.[] | select(.generation >= 2) | .name' | \\
    shelly batch command "Shelly.GetStatus" | jq '.[] | {device, uptime: .response.sys.uptime}'

  # Check firmware versions across all devices
  shelly batch command "Shelly.GetDeviceInfo" --all | jq '.[] | {device, fw: .response.fw_id}'
.EE


.SH SEE ALSO
\fBshelly-batch(1)\fP
